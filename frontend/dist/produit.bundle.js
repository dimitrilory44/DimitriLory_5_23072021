(()=>{"use strict";const e="localhost"===location.hostname||"127.0.0.1"===location.hostname?"http://localhost:3000":"https://api-p5-openclassroom.herokuapp.com",t=JSON.parse(localStorage.getItem("produit"));function o(e){return Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(e/100)}JSON.parse(localStorage.getItem("total")),JSON.parse(localStorage.getItem("order")),async function(){document.getElementById("notification").innerText=null!==t?JSON.parse(localStorage.getItem("produit")).length:0;const n=function(){let e=window.location.href,t=new URL(e),o=new URLSearchParams(t.search);if(o.has("_id")){let e=o.get("_id");return console.log(e),e}}();!function(e){document.querySelector(".jumbotron h1").textContent=`${e.name}`,document.querySelector(".jumbotron p").textContent=`${e.description}`;const t=document.getElementById("options");for(let o of e.lenses)t.innerHTML+=`<option value="${o}">${o}</option>`;document.getElementById("image").innerHTML=`<img class="card-img-top" src="${e.imageUrl}"/>`;const n=document.getElementById("quantite");for(let e=1;e<=5;e++)n.innerHTML+=`<option value="${e}">${e}</option>`;const r=document.querySelector(".prix span"),l=o(`${e.price}`);r.textContent=`${l}`,n.addEventListener("change",(t=>{let n=0;const r=document.querySelector(".prix span");n=`${e.price}`*parseInt(`${t.target.value}`);const l=o(`${n}`);r.textContent=`${l}`}));const a=document.getElementById("goToBasket"),c=document.getElementById("notification");console.log(localStorage.length);let i=localStorage.length;const s=[],p=JSON.parse(localStorage.getItem("produit"));console.log(p),null!==JSON.parse(localStorage.getItem("produit"))?c.innerText=p.length:c.innerText=0,a.addEventListener("click",(o=>{if(o.preventDefault(),document.querySelector("#alert span strong").textContent=`${e.name}`,document.getElementById("alert").classList.replace("no-show","show"),c.innerText=++i,null===JSON.parse(localStorage.getItem("produit"))){s.push({id:e._id,nom:e.name,description:e.description,img:e.imageUrl,objectif:t.options[t.selectedIndex].value,quantite:parseInt(n.options[n.selectedIndex].value),prix:e.price}),console.log(s);let o=JSON.stringify(s);localStorage.setItem("produit",o)}else{p.push({id:e._id,nom:e.name,description:e.description,img:e.imageUrl,objectif:t.options[t.selectedIndex].value,quantite:parseInt(n.options[n.selectedIndex].value),prix:e.price}),console.log(p);let o=JSON.stringify(p);localStorage.setItem("produit",o)}}))}(await async function(t){return fetch(`${e}/api/cameras/${t}`).then((e=>{if(e.ok)return e.json()})).then((e=>e)).catch((e=>{alert(e)}))}(n))}()})();